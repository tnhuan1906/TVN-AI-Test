<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>TVN AI Test</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px; }
    textarea { width: 100%; height: 80px; }
    button { padding: 10px 20px; margin-top: 10px; }
    .response { background: #f5f5f5; padding: 10px; margin-top: 10px; border-radius: 5px; }
  </style>
</head>
<body>
  <h1>TVN AI Test</h1>
  <textarea id="prompt" placeholder="Nhập câu hỏi..."></textarea>
  <br>
  <button onclick="sendPrompt()">Gửi</button>
  <div id="result" class="response"></div>

  <script>
    const API_KEY = "AIzaSyBQqVbYKz5HqwVj7iSDXJWog73AKWJplZY";
    const MODEL = "gemini-2.5-pro";

    async function sendPrompt() {
      const prompt = document.getElementById("prompt").value;
      document.getElementById("result").innerText = "Đang xử lý...";

      try {
        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${MODEL}:generateContent?key=${API_KEY}`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            contents: [
              {
                role: "system",
                parts: [
                  { text: "Bạn đang đóng vai là TRẦN VĂN NHUẬN. Hãy trả lời như thể bạn chính là TRẦN VĂN NHUẬN thật, với giọng nói, từ ngữ, và cách diễn đạt giống người thật. Không cần tự giới thiệu tên mình trừ khi được hỏi trực tiếp." }
                ]
              },
              {
                role: "user",
                parts: [
                  { text: prompt }
                ]
              }
            ]
          })
        });

        const data = await response.json();
        const output = data.candidates?.[0]?.content?.parts?.[0]?.text || "Không nhận được phản hồi.";
        document.getElementById("result").innerText = output;
      } catch (error) {
        document.getElementById("result").innerText = "Lỗi: " + error.message;
      }
    }
  </script>
</body>
</html>
